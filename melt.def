Bootstrap: docker
From: ubuntu:20.04

%post
    export TZ='Europe/Amsterdam'
    export DEBIAN_FRONTEND=noninteractive
    apt-get clean all && \
    apt-get update && \
    apt-get upgrade -y && \
    apt-get install -y  \
        autoconf \
        autogen \
        build-essential \
        curl \
        libbz2-dev \
        libcurl4-openssl-dev \
        libhts3 \
        libhts-dev \
        liblzma-dev \
        libncurses5-dev \
        libnss-sss \
        libssl-dev \
        libxml2-dev \
        libtbb2 \
        zlib1g-dev \
        bowtie2 \
        default-jre \
        wget \
        cmake

    # Installing bcf and samtools
    wget https://github.com/samtools/bcftools/releases/download/1.19/bcftools-1.19.tar.bz2
    wget https://github.com/samtools/samtools/releases/download/1.19.2/samtools-1.19.2.tar.bz2
    tar xvjf bcftools-1.19.tar.bz2
    tar xvjf samtools-1.19.2.tar.bz2
    cd bcftools-1.19/
    ./configure
    make
    make install
    cd ..
    cd samtools-1.19.2/
    make
    make install
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

    java --version
    bowtie2 --version

%environment
	export PATH=/bcftools-1.19:$PATH
	export PATH=/samtools-1.19.2:$PATH

%labels
    Author Tim Niemeijer